pipeline {
    agent any

    environment {
        EC2_IP = '3.88.90.213' // IP da sua inst창ncia EC2
        SSH_KEY_PATH = 'C:/Users/USER/Downloads/chave_jenkins' // Caminho da chave SSH (ajuste o nome do arquivo)
    }

    stages {
        stage('Testar Conex찾o com EC2') {
            steps {
                script {
                    bat """
                    powershell -Command "ssh -i '${SSH_KEY_PATH}' -o StrictHostKeyChecking=no ec2-user@${EC2_IP} 'echo Conectado com sucesso! && hostname && whoami && ls -la /home/ec2-user'"
                    """
                }
            }
        }
    }

    post {
        success {
            echo "Conex찾o com EC2 testada com sucesso!"
        }
        failure {
            echo "Falha ao conectar na EC2. Verifique o IP, chave SSH e permiss천es."
        }
    }
}
